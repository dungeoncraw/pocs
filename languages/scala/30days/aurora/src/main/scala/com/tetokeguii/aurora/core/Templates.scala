package com.tetokeguii.aurora.core

import scalatags.Text.all.*
import scalatags.Text.tags2.{nav, article, main as mainTag}

object Templates:
  def layout(titleStr: String, siteTitle: String)(contentBody: Modifier*): String =
    "<!DOCTYPE html>" + html(
      head(
        scalatags.Text.tags2.title(s"$titleStr | $siteTitle"),
        meta(charset := "utf-8"),
        meta(name := "viewport", content := "width=device-width, initial-scale=1")
      ),
      body(
        tag("header")(
          h1(siteTitle),
          nav(
            a(href := "/", "Home")
          )
        ),
        mainTag(contentBody),
        tag("footer")(
          p(s"Generated by Aurora Press")
        )
      )
    ).render

  def post(fm: FrontMatter, htmlContent: String, siteTitle: String): String =
    layout(fm.title, siteTitle)(
      article(
        tag("header")(
          h2(fm.title),
          p(s"Published on ${fm.date}"),
          if fm.tags.nonEmpty then
            p("Tags: " + fm.tags.mkString(", "))
          else
            div()
        ),
        raw(htmlContent)
      )
    )

  def index(posts: List[(FrontMatter, String)], siteTitle: String, siteDesc: String): String =
    layout("Home", siteTitle)(
      h2(siteDesc),
      ul(
        for (fm, slug) <- posts yield
          li(
            a(href := s"/${ProjectPaths.Posts.path}/$slug.html", fm.title),
            span(s" - ${fm.date}")
          )
      )
    )
